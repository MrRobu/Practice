DROP TABLE IF EXISTS Track CASCADE;
DROP TABLE IF EXISTS Album CASCADE;
DROP TABLE IF EXISTS Artist CASCADE;
DROP TABLE IF EXISTS Band CASCADE;
DROP TABLE IF EXISTS Genre CASCADE;
DROP TABLE IF EXISTS Track_Genre CASCADE;
DROP TABLE IF EXISTS Album_Track CASCADE;
DROP TABLE IF EXISTS Band_Artist CASCADE;

CREATE TABLE Artist(
    Id SERIAL
    	CONSTRAINT PK_Artist PRIMARY KEY,
	StageName VARCHAR(40)
		CONSTRAINT NN_Artist_StageName NOT NULL,
    FirstName VARCHAR(40)
    	CONSTRAINT NN_Artist_FirstName NOT NULL,
	LastName VARCHAR(40)
    	CONSTRAINT NN_Artist_LastName NOT NULL,
    Country VARCHAR(40),
	Birthdate DATE
);

CREATE TABLE Genre(
	Id SERIAL
		CONSTRAINT PK_Genre PRIMARY KEY,
	Name VARCHAR(25)
		CONSTRAINT NN_Genre_Name NOT NULL
);

CREATE TABLE Track(
	Id SERIAL
    	CONSTRAINT PK_Track PRIMARY KEY,
	Title VARCHAR(255)
    	CONSTRAINT NN_Track_Title NOT NULL,   
    Length VARCHAR(25)
);

CREATE TABLE Track_Genre(
	TrackId INTEGER
		CONSTRAINT FK_Track_Genre_TrackId REFERENCES Track(Id),
	GenreId INTEGER
		CONSTRAINT FK_Track_Genre_GenreId REFERENCES Genre(Id)
);

CREATE TABLE Band(
	Id SERIAL
        CONSTRAINT PK_Band PRIMARY KEY
        CONSTRAINT NN_Band_Id NOT NULL,
    Name VARCHAR(255),     
    Country VARCHAR(255)
); 

CREATE TABLE Album(
	Id SERIAL
        CONSTRAINT PK_Album PRIMARY KEY,
	Title VARCHAR(255),
    BandId INTEGER
    	CONSTRAINT FK_Album_BandId REFERENCES Band(Id),
	ArtistId INTEGER
    	CONSTRAINT FK_Album_ArtistId REFERENCES Artist(Id) 
);

CREATE TABLE Album_Track(
	TrackId INTEGER
		CONSTRAINT FK_Album_Track_TrackId REFERENCES Track(Id),
	AlbumId INTEGER
		CONSTRAINT FK_Album_Track_AlbumId REFERENCES Album(Id)
);

CREATE TABLE Band_Artist(
	BandId INTEGER
		CONSTRAINT FK_Band_Artist_BandId REFERENCES Band(Id),
	ArtistId INTEGER
		CONSTRAINT FK_Band_Artist_ArtistId REFERENCES Artist(Id)
);
